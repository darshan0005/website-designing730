<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Task 2 — Presentation Submission</title>
  <style>
    /* Simple, responsive styling */
    :root{
      --bg:#f6f8fb;
      --card:#ffffff;
      --accent:#0b7cff;
      --muted:#6b7280;
      --radius:12px;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    body{
      background: linear-gradient(180deg, var(--bg), #eef3ff);
      margin:0;
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:100vh;
      padding:24px;
    }
    .card{
      background:var(--card);
      width:100%;
      max-width:820px;
      border-radius:var(--radius);
      box-shadow: 0 10px 30px rgba(15,23,42,0.08);
      padding:28px;
    }
    h1{margin:0 0 6px 0; font-size:20px}
    p.lead{margin:0 0 18px 0; color:var(--muted)}
    .form-row{display:flex; gap:12px; flex-wrap:wrap; align-items:center}
    label{
      font-size:13px;
      color:#111827;
      display:block;
      margin-bottom:8px;
    }
    input[type="file"]{
      display:block;
    }
    .file-box{
      border:1px dashed #dbe6ff;
      padding:14px;
      border-radius:10px;
      background:linear-gradient(180deg,#fff,#fbfdff);
      width:100%;
    }
    .meta{
      font-size:13px;
      color:var(--muted);
      margin-top:8px;
    }
    input[type="text"], input[type="url"]{
      width:100%;
      padding:10px 12px;
      border-radius:8px;
      border:1px solid #e6eefc;
      box-sizing:border-box;
      font-size:14px;
    }
    .row{
      display:grid;
      grid-template-columns: 1fr 220px;
      gap:12px;
    }
    @media (max-width:720px){
      .row{grid-template-columns:1fr}
    }
    button{
      background:var(--accent);
      color:#fff;
      border:0;
      padding:10px 14px;
      border-radius:8px;
      cursor:pointer;
      font-weight:600;
    }
    .success{
      margin-top:12px;
      padding:10px 12px;
      background:#eefdf6;
      border:1px solid #c7f0d9;
      color:#065f46;
      border-radius:8px;
    }
    .error{
      margin-top:12px;
      padding:10px 12px;
      background:#fff5f5;
      border:1px solid #ffd7d7;
      color:#7f1d1d;
      border-radius:8px;
    }
    .preview{
      margin-top:16px;
      border-radius:8px;
      overflow:hidden;
      border:1px solid #e6eefc;
      background:#fff;
    }
    .preview iframe, .preview video{
      width:100%;
      height:360px;
      display:block;
    }
    small.hint{color:var(--muted); display:block; margin-top:8px}
  </style>
</head>
<body>
  <div class="card" role="main">
    <h1>Task 2 — Submit Presentation & Recording</h1>
    <p class="lead">Attach your PowerPoint (.pptx/.ppt) and paste your Zoom/YouTube/MP4 recording link.</p>

    <form id="submissionForm" action="#" method="post" enctype="multipart/form-data" onsubmit="return handleSubmit(event)">
      <div class="row">
        <div>
          <label for="pptFile">PowerPoint file</label>
          <div class="file-box">
            <input id="pptFile" name="pptFile" type="file" accept=".ppt,.pptx" />
            <div id="fileName" class="meta">No file chosen</div>
            <small class="hint">Allowed types: .ppt, .pptx. Max recommended size: 50 MB.</small>
          </div>
        </div>

        <div>
          <label for="videoLink">Recording link (Zoom / YouTube / MP4)</label>
          <input id="videoLink" name="videoLink" type="url" placeholder="https://..." />
          <small class="hint">If YouTube link is provided it will be previewed below.</small>
        </div>
      </div>

      <div style="margin-top:14px; display:flex; gap:8px; align-items:center;">
        <button type="submit">Prepare Submission</button>
        <button type="button" onclick="resetForm()" style="background:#f3f4f6; color:#111827;">Reset</button>
      </div>

      <div id="messageArea" aria-live="polite"></div>
    </form>

    <div id="previewArea" class="preview" style="display:none;"></div>

    <section style="margin-top:18px;">
      <h3 style="font-size:15px; margin-bottom:6px;">Quick Zoom recording steps</h3>
      <ul style="margin:0; padding-left:18px; color:var(--muted)">
        <li>Start Zoom and share your screen (PowerPoint window) before recording.</li>
        <li>In Zoom: Record → Record to this Computer (or Cloud if enabled).</li>
        <li>Stop recording when finished — Zoom will create an MP4 (and audio) file.</li>
        <li>Upload MP4 to YouTube (unlisted) or share Zoom cloud link, then paste link above.</li>
      </ul>
    </section>
  </div>

  <script>
    const pptFile = document.getElementById('pptFile');
    const fileName = document.getElementById('fileName');
    const messageArea = document.getElementById('messageArea');
    const previewArea = document.getElementById('previewArea');
    const videoLink = document.getElementById('videoLink');

    pptFile.addEventListener('change', () => {
      messageArea.innerHTML = '';
      if (!pptFile.files || !pptFile.files.length) {
        fileName.textContent = 'No file chosen';
        return;
      }
      const f = pptFile.files[0];
      fileName.textContent = `${f.name} (${Math.round(f.size/1024)} KB)`;
      // basic size check (suggested)
      if (f.size > 100 * 1024 * 1024) { // 100 MB
        showError('File is large — consider compressing slides or keeping under 100 MB.');
      }
    });

    function handleSubmit(e){
      e.preventDefault();
      messageArea.innerHTML = '';
      previewArea.style.display = 'none';
      previewArea.innerHTML = '';

      // Validate file selected
      if(!pptFile.files || !pptFile.files.length) {
        showError('Please choose your PowerPoint (.ppt/.pptx) file before submitting.');
        return false;
      }
      const f = pptFile.files[0];
      const allowed = ['application/vnd.ms-powerpoint','application/vnd.openxmlformats-officedocument.presentationml.presentation'];
      // fallback check by extension
      const ext = f.name.split('.').pop().toLowerCase();
      if(!['ppt','pptx'].includes(ext)) {
        showError('Invalid file type. Please upload a .ppt or .pptx file.');
        return false;
      }

      // Validate link format if provided
      const url = videoLink.value.trim();
      if(url && !isValidUrl(url)) {
        showError('The recording link does not look like a valid URL.');
        return false;
      }

      // Show success and preview (if YouTube)
      showSuccess('Submission prepared locally. (This demo page does not upload to a server.)');
      if(url){
        // If YouTube, embed; else show clickable link or attempt to display MP4
        const ytId = extractYouTubeId(url);
        if(ytId){
          previewArea.style.display = 'block';
          previewArea.innerHTML = `<iframe src="https://www.youtube.com/embed/${ytId}" title="Recording preview" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
        } else if(url.match(/\.(mp4|webm|ogg)(\?.*)?$/i)){
          previewArea.style.display = 'block';
          previewArea.innerHTML = `<video controls src="${escapeHtml(url)}"></video>`;
        } else {
          previewArea.style.display = 'block';
          previewArea.innerHTML = `<div style="padding:14px"><strong>Recording link:</strong><div style="margin-top:8px"><a href="${escapeHtml(url)}" target="_blank" rel="noopener">${escapeHtml(url)}</a></div></div>`;
        }
      }

      // NOTE: For real upload, here you would submit the form data to the server:
      // const formData = new FormData(document.getElementById('submissionForm'));
      // fetch('/upload-endpoint', { method:'POST', body: formData }).then(...)

      return false;
    }

    function showError(msg){
      messageArea.innerHTML = `<div class="error">${escapeHtml(msg)}</div>`;
    }
    function showSuccess(msg){
      messageArea.innerHTML = `<div class="success">${escapeHtml(msg)}</div>`;
    }
    function resetForm(){
      document.getElementById('submissionForm').reset();
      fileName.textContent = 'No file chosen';
      messageArea.innerHTML = '';
      previewArea.style.display = 'none';
      previewArea.innerHTML = '';
    }
    function isValidUrl(s){
      try{
        new URL(s);
        return true;
      }catch(e){ return false; }
    }
    function extractYouTubeId(url){
      try{
        const u = new URL(url);
        if(u.hostname.includes('youtube.com')){
          return u.searchParams.get('v');
        }
        if(u.hostname.includes('youtu.be')){
          return u.pathname.slice(1);
        }
        return null;
      }catch(e){ return null; }
    }
    function escapeHtml(s){
      return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;').replaceAll('"','&quot;');
    }
  </script>
</body>
</html>
